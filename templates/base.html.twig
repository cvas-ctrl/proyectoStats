<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Rick & Morty Stats{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="{{ asset('favicon.png') }}">
    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('css/main.css') }}">
    {% endblock %}
</head>
<body class="bg-light">

<nav class="navbar navbar-expand-lg navbar-dark shadow-sm mb-4 py-2" style="border-bottom: 2px solid #97ce4c; background: rgba(10, 10, 10, 0.95);">
    <div class="container">

        <a class="navbar-brand mx-lg-auto d-flex align-items-center order-0" href="{{ path('app_home') }}">
            <img src="{{ asset('images/logo_stats.png') }}"
                 alt="Logo"
                 style="width: 180px; height: auto; filter: drop-shadow(0 0 5px rgba(151, 206, 76, 0.4));"
                 class="img-fluid hover-zoom">
        </a>

        <button class="navbar-toggler order-2 border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" style="color: #97ce4c;">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse w-100 order-3" id="navbarNav">

            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link text-white d-flex align-items-center gap-2 px-3 rounded-pill border border-warning border-opacity-25"
                       href="{{ path('app_ranking') }}"
                       style="background: rgba(255, 193, 7, 0.05); font-family: 'Arial Black', sans-serif; font-size: 0.8rem;">
                        <span style="color: #ffc107;">⭐</span> RANKING GLOBAL
                    </a>
                </li>
            </ul>

            <ul class="navbar-nav ms-auto align-items-center gap-3">
                {% if app.user %}
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle text-white border border-info border-opacity-50 rounded-pill px-4"
                           href="#"
                           role="button"
                           data-bs-toggle="dropdown"
                           style="background: rgba(0, 176, 200, 0.1);
                      font-family: 'Arial Black', sans-serif;
                      font-size: 0.85rem;
                      transition: all 0.3s ease;
                      box-shadow: 0 0 10px rgba(0, 176, 200, 0.1);">
                            <span style="color: #97ce4c; text-shadow: 0 0 5px rgba(151, 206, 76, 0.4);">ID:</span>
                            {{ app.user.username|upper }}
                        </a>

                        <ul class="dropdown-menu dropdown-menu-end shadow-lg border-info animate slideIn py-2"
                            style="background: #121212; border: 1px solid rgba(0, 176, 200, 0.5); min-width: 200px;">

                            {% if is_granted('ROLE_ADMIN') %}
                                <li>
                                    <a class="dropdown-item py-2 fw-bold" href="{{ path('admin_site') }}" style="color: #97ce4c;">
                                        <i class="fas fa-crown me-2"></i> PANEL ADMIN
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider" style="background-color: rgba(0, 176, 200, 0.3);"></li>
                            {% endif %}

                            <li>
                                <a class="dropdown-item py-2 text-white" href="{{ path('app_perfil') }}" style="transition: 0.2s;">
                                    <i class="fas fa-user-astronaut me-2 text-info"></i> MI CUENTA
                                </a>
                            </li>

                            <li>
                                <a class="dropdown-item py-2 text-white" href="{{ path('app_mis_stats') }}" style="transition: 0.2s;">
                                    <i class="fas fa-chart-line me-2 text-info"></i> MIS ESTADÍSTICAS
                                </a>
                            </li>

                            <li><hr class="dropdown-divider" style="background-color: rgba(0, 176, 200, 0.3);"></li>

                            <li>
                                <a class="dropdown-item py-2 text-danger small" href="{{ path('app_logout') }}">
                                    <i class="fas fa-sign-out-alt me-2"></i> CERRAR SESIÓN
                                </a>
                            </li>
                        </ul>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link text-white fw-semibold small px-3" href="{{ path('app_login') }}" style="letter-spacing: 1px;">LOGIN</a>
                    </li>
                    <li class="nav-item">
                        <a class="btn btn-sm px-4 fw-bold shadow-sm rounded-pill"
                           href="{{ path('app_register') }}"
                           style="background: linear-gradient(45deg, #97ce4c, #76a33c);
                      color: #1a1a1a;
                      border: none;
                      box-shadow: 0 4px 15px rgba(151, 206, 76, 0.3);
                      transition: transform 0.2s;">
                            REGISTRO
                        </a>
                    </li>
                {% endif %}
            </ul>

            <style>
                .dropdown-item:hover {
                    background: rgba(0, 176, 200, 0.15) !important;
                    color: #97ce4c !important;
                }
                .dropdown-toggle:hover {
                    box-shadow: 0 0 15px rgba(0, 176, 200, 0.4) !important;
                    transform: translateY(-1px);
                }
            </style>
        </div>
    </div>
</nav>

{% block body %}{% endblock %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% block javascripts %}{% endblock %}
</body>
</html>
